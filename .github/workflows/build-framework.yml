name: Pull Request Testing
on:
  pull_request:
jobs:
  mac_build:
    name: Build on Mac
    runs-on: macos-10.15
    steps:
      - name: Checkout Actions
        uses: actions/checkout@master

      - name: Install Danger
        uses: danger/swift@3.3.0
        with:
            args: --failOnErrors --no-publish-check
        env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_DANGER_API_TOKEN }}
            
        run: bundle install

      - name: Run Danger
        run: bundle exec danger

      - name: Run xcodebuild
        run: swift build -Xswiftc "-sdk" -Xswiftc "`xcrun --sdk iphonesimulator --show-sdk-path`" -Xswiftc "-target" -Xswiftc "x86_64-apple-ios13.0-simulator"
